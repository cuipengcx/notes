##问题

1. 项目介绍?
	> 食恪生鲜网是技术研发中心给公司电商事业部做的一个O2O生鲜平台，用户通过注册成为我们的会员后可以进行线上商品浏览、下订单，可以选择上门店自提也可以由我们负责线下配送上门，做到用户不用出门就可以吃到新鲜的生鲜。

	> 该平台采用分布式系统架构主要包含以下几个子系统:后台管理系统、前台系统、会员系统、订单系统、搜索系统，任务调度系统，及单点登陆系统。
	每个系统单独为一个服务，系统之间通过标准的RESTfull Web API进行交互。
2. 遇到什么问题?
	
3. 团队情况?
	> 1. 产品经理:3个,确定需求以及给出项目原型图.
	> 2. 项目经理:1个,项目管理.
	> 3. 前端团队:5个,根据产品经理给出的原型图制造静态页面.
	> 4. 后端团队:12个,实现所有功能
	> 5. 测试团队:4个,测试所有功能.
	> 6. 运维团队:3个,项目的发布以及维护.
4. 单点登录系统:
	- 包括 登录 注册 用户信息查询 第三方登录
5. 分布式数据库事务:
	>最终一致性有三种模式：可靠事件模式、业务补偿模式、TCC 模式
	>http://blog.csdn.net/javahongxi/article/details/54177741
6. 数据库查询优化:
 	>1. 不要在程序中循环查询，能一条sql解决的不用两条
	>2. 不用select *
	>3. 频繁查询的字段加索引
7. 高并发/高性能解决方案:
	- 在同一个时间点，有很多用户同时的访问URL地址，比如：淘宝的双11，双12，就会产生高并发。
	
	高并发环境下会来带的后果：

	- 服务器/DB服务器资源被占满崩溃
	>1. 多级缓存
	>2. 异步处理(如:消息队列,多线程)
	>3. 页面静态化
	>4. 做服务器的均衡负载,把压力均衡到多台服务器
	>5. 服务器部署，图片服务器分离，静态文件走CDN
	>6. DBA数据库的优化查询条件，索引优化
	>7. 脚本合理控制请求，如，防止用户重复点击导致的ajax多余的请求，等等
	 
	- 数据一致性和完整性,比如：出现重复的数据记录，多次添加了用户积分等
	>1. 通过表设计,如：记录表添加唯一约束，数据处理逻辑使用事物防止并发下的数据错乱问题
	>2. 通过服务端锁进程防止包并发下的数据错乱问题

	[参考1](https://blog.thankbabe.com/2016/04/01/high-concurrency/)
	[参考2](https://blog.thankbabe.com/2016/09/14/high-concurrency-scheme/)

8. 高可用性/可扩展解决方案:
	>1. 集群:lvs+keepalived+nginx

9. 接口安全:
	> https://blog.thankbabe.com/2016/06/05/donot-touch-my-url/

10. 部署架构:

11. 架构演化历程:

12. 设计模式:

13. JJWT:

14. 前后端分离:
最核心的就是如何解决会话和鉴权，比如用jwt。其他就是是否要解决跨域了

15. tomcat优化:
16. 微服务经验

##第一天遇到的问题整理

1. hashset为什么线程不安全 怎么实现的?
2. mysql datetime和timestemp的区别
3. nginx负载均衡如何实现的?
4. 单点登录系统具体怎么系统间调用?
5. SpringBoot JAVA config和XML config的区别 加载顺序？
6. springmvc controller是线程安全的吗?
7. 定时任务 执行过程中 定时任务调度服务器挂了如何处理？远程执行的服务挂了如何处理？
8. redis  MQ使用场景?
	>1. redis:首页、订单
	>2. MQ:全文检索索引的创建
9. @autowired和@resource的区别?
10. hashcode是干什么用的?和equal的关系?
11. spring mvc中，直接在类里面注入的HttpServletRequst是否安全呢?
12. mysql读写分离  分库分表?
13. json web token和simple web token?
14. CAP 理论?
	>一致性,可用性,分区容错

##第二天

1. 分布式锁
	>1. db
	>2. redis  (Redission,Redlock)
	>3. zookeeper
	
	总结: 优先db和redis [参考1](http://www.jianshu.com/p/c2b4aa7a12f1)
	[参考2](http://www.hollischuang.com/archives/1716)
	[参考3](http://rdc.gleasy.com/%E4%B8%A4%E7%A7%8D%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%881.html)
	[参考4](http://rdc.gleasy.com/%E4%B8%A4%E7%A7%8D%E5%88%86%E5%B8%83%E5%BC%8F%E9%94%81%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%A1%882.html)
2. mysql常用函数
3. 24小时 格式化日期 包括mysql JAVA
4. 多线程  线程池
5. **spring事务 传播机制**
6. mysql什么时候该加索引  产品类型该不该加索引
7. cron表达式
8. JAVA并发锁
9. theadlocal
10. 分布式事务场景
	>[参考](http://www.roncoo.com/article/detail/124243)

## 第三次

1. JAVA死锁和避免死锁
2. session 共享
3. http  TCP协议 三次握手 三次伸手
4. 设计模式
5. 单例模式  多线程环境下怎么保证安全
6. IO 阻塞 非阻塞
7. Spring 生命周期

## 别人发的高级题目

1. springMVC怎么处理jsonp请求
2. springMVC是怎么匹配到相应控制器方法的，有看过源码吗？
3. springMVC是怎么将对象自动转json的？
4. spring bean相互循环依赖会怎么样？
5. spring IOC是怎么自动注入的?
6. 画出HashMap数据结构图，怎么将HashMap变成线程安全？画出concurrentHashMap数据结构图，它是怎么保证效率和安全的？
7. 分段锁要你来实现，你会怎么做？锁有几种？差别是什么？
8. 熟悉GC吗？怎么确定垃圾对象的？
9. 枚举对象和枚举类是什么关系？有写过枚举方法重写吗？
10. 说说模板模式？
11. 你说的不是代理模式吗？那说说静态代理和动态代理？
12. 写个二叉树遍历算法
13. 写个十进制转二进制算法
14. div和table区别？
15. 页面重排和重构区别？
16. redis线程模型，底层原理，如何实现高并发，高可用，持久化。redis集群扩容与数据同步问题。redis序列化用的哪种方式，如何防止穿透
17. mq的原理，如何保证消息可靠性传输，如何处理消息丢失，解决幂等性。mq的消息延时和过期失效。如何自己设计一个消息中间件
18. dubbo的原理，spi思想，如何进行服务治理，dubbo的服务降级，失败重试设置。如何自己设计一个类似dubbo的rpc框架
19. AQS的实现原理，哪些地方用到AQS/CAS。ConcurrentHashMap原理，他的segment锁是如何实现的。Java的线程模型，这个模型下的并发可能出现哪些问题，如何处理？
20. synchronized是如何实现的，他和lock的区别。
21. 如何处理mysql主从同步延迟
22. mybatis的原理和mapper接口调用的原理
23. tomcat线程模型
24. 分布式事务场景和解决方案,redis分布式锁和zookeeper分布式锁
25. TCP三次握手和四次挥手，为什么要这样做。
26. 项目中遇到哪些挑战，怎么解决
27. 如何设计高可用/高并发系统
28. 分布式环境下，如何保持redis与mysql数据的一致性？
29. 聊聊dubbo、redis、mq里面踩过的一些坑?
